var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{K as i,u as r,r as d,j as p,q as c,h as m,t as f,P as u,p as b,a as h,_,$ as g,a4 as y,E as x,Q as w,R as v,O as j,T as k,F as O,w as D,o as E,b as C,d as P,c as A,G as I,H as V,n as F,U as L,e as U}from"./vendor.206eb2e4.js";/* empty css                        *//* empty css                *//* empty css                    *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css                  */import{a as B}from"./index.0b1d56ef.js";import{i as M}from"./index.b8aacb85.js";let S=null,Y=B("userinfo").name;"root"==Y&&(Y="口腔科");const q={name:"admin-list",setup(){i(!0),i(null),r();const e=d({date:[(new Date).getFullYear()+"-"+(new Date).getMonth(),(new Date).getFullYear()+"-"+((new Date).getMonth()+1)],office_name:Y,office_list:[],charge_subclass:"",loading:!1,tableData:[],multipleSelection:[],head:"",option:{title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[]},toolbox:{show:!0,orient:"vertical",left:"right",feature:{saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"Email",type:"line",label:{show:!0,position:"top"},smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:[120,132,101,134,90,230,210]},{name:"Email",type:"line",label:{show:!0,position:"top"},smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:[120,132,101,134,90,230,210]}]}});p((()=>{h(),b(),S=M(document.getElementById("zoom"))})),c((()=>{S.dispose()}));const b=()=>{e.loading=!0,m.get("/api/back/costControls",{params:{office_name:e.office_name,date:e.date}}).then((a=>{e.head=a.data.head,e.tableData=a.data.data,e.loading=!1,S.dispose(),S=M(document.getElementById("zoom")),e.option.legend.data=a.data.line_chart.legend_data,e.option.xAxis[0].data=a.data.line_chart.series_date,e.option.series[0].name=a.data.line_chart.series_name,e.option.series[0].data=a.data.line_chart.series_data,e.option.series[1].name=a.data.line_chart_qy_lc.series_name,e.option.series[1].data=a.data.line_chart_qy_lc.series_data,S.setOption(e.option)}))},h=()=>{m.get("/api/back/offices",{params:{is_lc:1,cost_control:1,type:1}}).then((a=>{e.office_list=a.data}))};return _=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&n(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&n(e,t,a[t]);return e})({},f(e)),a(_,t({handleOption:()=>{b()},handleExport:()=>{m.get("/api/back/costControls/export",{params:{office_name:e.office_name,date:e.date},responseType:"blob"}).then((a=>{let t=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(t),l=document.createElement("a");l.style.display="none",l.href=o,l.setAttribute("id","downloadLink");let s=new Date(e.date[0]).getFullYear()+"/"+(new Date(e.date[0]).getMonth()+1),n=new Date(e.date[1]).getFullYear()+"/"+(new Date(e.date[1]).getMonth()+1);l.setAttribute("download",e.office_name+"-成本控制-"+s+"-"+n+".xlsx"),document.body.appendChild(l),l.click();let i=document.getElementById("downloadLink");document.body.removeChild(i)}))},Plus:u}));var _}};b("data-v-26ef0f9a");const z=U("搜索"),R=U("导出Excel"),T={style:{"text-align":"center","margin-bottom":"40px"}},G=C("div",{id:"zoom"},null,-1);h(),q.render=function(e,a,t,o,l,s){const n=_,i=g,r=y,d=x,p=w,c=v,m=j,f=k;return E(),O(m,{style:{"min-height":"100%"}},{header:D((()=>[C("div",null,[P(i,{modelValue:e.office_name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.office_name=a),placeholder:"请选择",filterable:"",style:{"margin-bottom":"20px","margin-right":"10px"}},{default:D((()=>[(E(!0),A(V,null,I(e.office_list,(e=>(E(),O(n,{key:e.id,label:e.value,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),P(r,{modelValue:e.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.date=a),type:"monthrange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"]),P(d,{type:"primary",onClick:o.handleOption,style:{"margin-left":"10px"}},{default:D((()=>[z])),_:1},8,["onClick"]),P(d,{type:"primary",onClick:o.handleExport},{default:D((()=>[R])),_:1},8,["onClick"])])])),default:D((()=>[C("h1",T,F(e.head),1),G,L(P(c,{data:e.tableData,stripe:"",style:{width:"100%"}},{default:D((()=>[P(p,{prop:"date",label:"日期"}),P(p,{prop:"personnel_cost",label:"人员经费"}),P(p,{prop:"consumable_cost",label:"耗材支出"}),P(p,{prop:"drug_cost",label:"药品费"}),P(p,{prop:"fixed_asset_cost",label:"固定资产折旧费"}),P(p,{prop:"other_cost",label:"其他支出"}),P(p,{prop:"total_cost",label:"合计"})])),_:1},8,["data"]),[[f,e.loading]])])),_:1})},q.__scopeId="data-v-26ef0f9a";export{q as default};
