var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{K as i,u as p,r as d,j as s,q as c,h as m,t as b,P as u,_ as f,$ as g,a4 as _,E as h,Q as y,R as w,O as j,T as k,F as v,w as x,o as O,b as D,d as E,c as P,G as C,H as V,U as F,e as U}from"./vendor.206eb2e4.js";/* empty css                        *//* empty css                *//* empty css                    *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css                  */import{a as L}from"./index.0b1d56ef.js";let M=L("userinfo").name;"root"==M&&(M="口腔科");const Y={name:"admin-list",setup(){i(!0),i(null),p();const e=d({date:[(new Date).getFullYear()+"-"+(new Date).getMonth(),(new Date).getFullYear()+"-"+((new Date).getMonth()+1)],office_name:M,office_list:[],charge_subclass:"",loading:!1,tableData:[],multipleSelection:[]});s((()=>{g(),f()})),c((()=>{}));const f=()=>{e.loading=!0,m.get("/api/back/indicators",{params:{office_name:e.office_name,date:e.date}}).then((a=>{e.tableData=a.data,e.loading=!1}))},g=()=>{m.get("/api/back/offices",{params:{is_lc:1,indicator:1}}).then((a=>{e.office_list=a.data}))};return _=((e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&n(e,t,a[t]);return e})({},b(e)),a(_,t({handleOption:()=>{f()},handleExport:()=>{m.get("/api/back/indicators/export",{params:{office_name:e.office_name,date:e.date},responseType:"blob"}).then((a=>{let t=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=l,o.setAttribute("id","downloadLink");let r=new Date(e.date[0]).getFullYear()+"/"+(new Date(e.date[0]).getMonth()+1),n=new Date(e.date[1]).getFullYear()+"/"+(new Date(e.date[1]).getMonth()+1);o.setAttribute("download",e.office_name+"-重点指标-"+r+"-"+n+".xlsx"),document.body.appendChild(o),o.click();let i=document.getElementById("downloadLink");document.body.removeChild(i)}))},Plus:u}));var _}},R=U("搜索"),A=U("导出Excel");Y.render=function(e,a,t,l,o,r){const n=f,i=g,p=_,d=h,s=y,c=w,m=j,b=k;return O(),v(m,{style:{"min-height":"100%"}},{header:x((()=>[D("div",null,[E(i,{modelValue:e.office_name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.office_name=a),placeholder:"请选择",filterable:"",style:{"margin-bottom":"20px","margin-right":"10px"}},{default:x((()=>[(O(!0),P(V,null,C(e.office_list,(e=>(O(),v(n,{key:e.id,label:e.value,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),E(p,{modelValue:e.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.date=a),type:"monthrange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"]),E(d,{type:"primary",onClick:l.handleOption,style:{"margin-left":"10px"}},{default:x((()=>[R])),_:1},8,["onClick"]),E(d,{type:"primary",onClick:l.handleExport},{default:x((()=>[A])),_:1},8,["onClick"])])])),default:x((()=>[F(E(c,{data:e.tableData,stripe:"",style:{width:"100%"}},{default:x((()=>[E(s,{prop:"date",label:"日期"}),E(s,{prop:"billing_income",label:"开单收入(元)"}),E(s,{prop:"direct_cost",label:"直接成本(元)"}),E(s,{prop:"balance",label:"收支结余(元)"}),E(s,{prop:"balance_rate",label:"结余率"}),E(s,{prop:"drug_income",label:"药品收入(元)"}),E(s,{prop:"consumable_income",label:"耗材收入(元)"}),E(s,{prop:"drug_pay",label:"药品支出(元)"}),E(s,{prop:"consumable_pay",label:"耗材支出(元)"}),E(s,{prop:"drug_rate",label:"药占比"}),E(s,{prop:"consumable_rate",label:"耗占比"}),E(s,{prop:"drug_profit",label:"药品利润(元)"}),E(s,{prop:"consumable_profit",label:"耗材利润(元)"})])),_:1},8,["data"]),[[b,e.loading]])])),_:1})};export{Y as default};
