var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;import{K as i,u as s,r as p,j as d,q as c,h as m,t as b,P as u,p as g,a as h,_ as f,$ as _,a4 as y,E as w,Q as x,R as v,O as C,T as k,F as j,w as E,o as D,b as O,d as F,c as A,G as I,H as z,m as P,n as q,U as S,e as B}from"./vendor.be2f38ff.js";/* empty css                        *//* empty css                *//* empty css                    *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css                  */import{a as L}from"./index.1d977e39.js";import{i as M}from"./index.84678a0d.js";let V=null,R=null,U=L("userinfo").name;"root"==U&&(U="口腔科");const Y={name:"admin-list",setup(){i(!0),i(null),s();const e=p({date:[(new Date).getFullYear()+"-1",(new Date).getFullYear()+"-"+((new Date).getMonth()+1)],office_name:U,office_list:[],charge_subclass:"",loading:!1,tableData:[],multipleSelection:[],head:"",option:{title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[]},toolbox:{show:!0,orient:"vertical",left:"right",feature:{saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"Email",type:"line",label:{show:!0,position:"top"},smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:[120,132,101,134,90,230,210]},{name:"Email",type:"line",label:{show:!0,position:"top"},smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:[120,132,101,134,90,230,210]}]},option_pie:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,orient:"vertical",left:"right",feature:{saveAsImage:{show:!0}}},legend:{data:["Direct","Marketing","Search Engine"]},series:[{name:"开单收入",type:"pie",selectedMode:"single",radius:[0,"60%"],label:{show:!0,formatter:"{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ",backgroundColor:"#F6F8FC",borderColor:"#8C8D8E",borderWidth:1,borderRadius:4,rich:{a:{color:"#6E7079",lineHeight:22,align:"center"},hr:{borderColor:"#8C8D8E",width:"100%",borderWidth:1,height:0},b:{color:"#4C5058",fontSize:14,fontWeight:"bold",lineHeight:33},per:{color:"#fff",backgroundColor:"#4C5058",padding:[3,4],borderRadius:4}}},labelLine:{length:30},data:[{value:1548,name:"Search Engine"},{value:775,name:"Direct"},{value:679,name:"Marketing",selected:!0}]}]}});d((()=>{h(),g(),V=M(document.getElementById("zoom")),R=M(document.getElementById("zoom_pie"))})),c((()=>{V.dispose(),R.dispose()}));const g=()=>{e.loading=!0,m.get("/api/back/billingincomes",{params:{office_name:e.office_name,date:e.date}}).then((t=>{e.head=t.data.head,e.tableData=t.data.data,e.loading=!1,V.dispose(),V=M(document.getElementById("zoom")),e.option.legend.data=t.data.line_chart.legend_data,e.option.xAxis[0].data=t.data.line_chart.series_date,e.option.series[0].name=t.data.line_chart.series_name,e.option.series[0].data=t.data.line_chart.series_data,e.option.series[1].name=t.data.line_chart_qy.series_name,e.option.series[1].data=t.data.line_chart_qy.series_data,V.setOption(e.option),R.dispose(),R=M(document.getElementById("zoom_pie")),e.option_pie.legend.data=t.data.pie_chart.legend_data,e.option_pie.series[0].data=t.data.pie_chart.series_data,R.setOption(e.option_pie)}))},h=()=>{m.get("/api/back/offices").then((t=>{e.office_list=t.data}))};return f=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&r(e,a,t[a]);if(o)for(var a of o(t))n.call(t,a)&&r(e,a,t[a]);return e})({},b(e)),t(f,a({handleOption:()=>{g()},handleExport:()=>{m.get("/api/back/billingincomes/export",{params:{office_name:e.office_name,charge_subclass:e.charge_subclass,date:e.date},responseType:"blob"}).then((t=>{let a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(a),l=document.createElement("a");l.style.display="none",l.href=o,l.setAttribute("id","downloadLink");let n=new Date(e.date[0]).getFullYear()+"/"+(new Date(e.date[0]).getMonth()+1),r=new Date(e.date[1]).getFullYear()+"/"+(new Date(e.date[1]).getMonth()+1);l.setAttribute("download",e.office_name+"-开单收入-"+n+"-"+r+".xlsx"),document.body.appendChild(l),l.click();let i=document.getElementById("downloadLink");document.body.removeChild(i)}))},Plus:u}));var f}};g("data-v-8ece5134");const H=B("搜索"),W=B("导出Excel"),T={style:{"text-align":"center","margin-bottom":"40px"}},G=O("div",{id:"zoom"},null,-1),K=O("div",{id:"zoom_pie"},null,-1);h(),Y.render=function(e,t,a,o,l,n){const r=f,i=_,s=y,p=w,d=x,c=v,m=C,b=k;return D(),j(m,{style:{"min-height":"100%"}},{header:E((()=>[O("div",null,[F(i,{modelValue:e.office_name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.office_name=t),placeholder:"请选择",filterable:"",style:{"margin-bottom":"20px","margin-right":"10px"}},{default:E((()=>[(D(!0),A(z,null,I(e.office_list,(e=>(D(),j(r,{key:e.id,label:e.value,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),F(s,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t),type:"monthrange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"]),P(' <el-input style="width: 200px; margin-top: 20px; margin-right: 10px; margin-left: 10px;"\r\n\t\t\t\t\tplaceholder="请输入收费项目" v-model="charge_subclass" clearable /> '),F(p,{type:"primary",onClick:o.handleOption,style:{"margin-left":"10px"}},{default:E((()=>[H])),_:1},8,["onClick"]),F(p,{type:"primary",onClick:o.handleExport},{default:E((()=>[W])),_:1},8,["onClick"])])])),default:E((()=>[O("h1",T,q(e.head),1),G,K,S(F(c,{data:e.tableData,stripe:"",style:{width:"100%"}},{default:E((()=>[F(d,{prop:"date",label:"日期"}),P(' <el-table-column prop="billing_dep" label="开单科室" /> '),P(' <el-table-column prop="patient_dep" label="病人科室" /> '),F(d,{prop:"pathology_income",label:"病理学诊断收入(元)"}),F(d,{prop:"material_income",label:"材料费收入(元)"}),F(d,{prop:"ultrasound_income",label:"超声检查收入(元)"}),F(d,{prop:"radiation_income",label:"放射检查收入(元)"}),F(d,{prop:"check_income",label:"检查费收入(元)"}),F(d,{prop:"checkout_income",label:"检验收入(元)"}),F(d,{prop:"surgery_income",label:"手术项目收入(元)"}),F(d,{prop:"xiyao_income",label:"西药费收入(元)"}),F(d,{prop:"general_medical_income",label:"一般医疗服务收入(元)"}),F(d,{prop:"zhongyao_income",label:"中药收入(元)"}),F(d,{prop:"total_money",label:"总金额(元)"}),P(' <el-table-column prop="sequential" label="环比">\r\n\t\t\t\t<template #default="scope">\r\n\t\t\t\t\t<span style="color: #F56C6C;" v-if="scope.row.sequential > 0">{{scope.row.sequential}}</span>\r\n\t\t\t\t\t<span style="color: #67C23A;" v-else>{{scope.row.sequential}}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop="compare_same" label="同比">\r\n\t\t\t\t<template #default="scope">\r\n\t\t\t\t\t<span style="color: #F56C6C;" v-if="scope.row.compare_same > 0">{{scope.row.compare_same}}</span>\r\n\t\t\t\t\t<span style="color: #67C23A;" v-else>{{scope.row.compare_same}}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column> ')])),_:1},8,["data"]),[[b,e.loading]])])),_:1})},Y.__scopeId="data-v-8ece5134";export{Y as default};
